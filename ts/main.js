(()=>{var P=function(e){return new Promise(t=>{var o=document.createElement("script");o.src=e,o.onload=()=>{t()},document.head.appendChild(o)})},T=function(e){return new Promise(t=>{var o=document.createElement("link");o.href=e,o.type="text/css",o.rel="stylesheet",o.onload=()=>{t()},document.head.appendChild(o)})};var I=function(e){for(var t=function(n){for(var i=n.childNodes,s=i.length,m=[],l,h,c,d,p=0;p<s;p++)l=i[p],l.nodeType===1&&(h=l.children[0],c=h.getAttribute("data-size").split("x"),d={src:h.getAttribute("href"),w:parseInt(c[0],10),h:parseInt(c[1],10)},l.children.length>1&&(d.title=l.children[1].innerHTML),h.children.length>0&&(d.msrc=h.children[0].getAttribute("src")),d.el=l,m.push(d));return m},o=function n(i,s){return i&&(s(i)?i:n(i.parentNode,s))},r=function(n){n=n||window.event,n.preventDefault?n.preventDefault():n.returnValue=!1;var i=n.target||n.srcElement,s=o(i,function(w){return w.tagName&&w.tagName.toUpperCase()==="FIGURE"});if(!!s){for(var m=s.parentNode,l=s.parentNode.childNodes,h=l.length,c=0,d,p=0;p<h;p++)if(l[p].nodeType===1){if(l[p]===s){d=c;break}c++}return d>=0&&y(d,m),!1}},a=function(){var n=window.location.hash.substring(1),i={};if(n.length<5)return i;for(var s=n.split("&"),m=0;m<s.length;m++)if(!!s[m]){var l=s[m].split("=");l.length<2||(i[l[0]]=l[1])}return i.gid&&(i.gid=parseInt(i.gid,10)),i},y=function(n,i,s,m){var l=document.querySelectorAll(".pswp")[0],h,c,d;if(d=t(i),c={galleryUID:i.getAttribute("data-pswp-uid"),getThumbBoundsFn:function(w){var N=d[w].el.getElementsByTagName("img")[0],D=window.pageYOffset||document.documentElement.scrollTop,S=N.getBoundingClientRect();return{x:S.left,y:S.top+D,w:S.width}}},m)if(c.galleryPIDs){for(var p=0;p<d.length;p++)if(d[p].pid==n){c.index=p;break}}else c.index=parseInt(n,10)-1;else c.index=parseInt(n,10);isNaN(c.index)||(s&&(c.showAnimationDuration=0),h=new PhotoSwipe(l,PhotoSwipeUI_Default,d,c),h.init())},u=document.querySelectorAll(e),f=0,b=u.length;f<b;f++)u[f].setAttribute("data-pswp-uid",f+1),u[f].onclick=r;var v=a();v.pid&&v.gid&&y(v.pid,u[v.gid-1],!0,!0)};function E(e){let t=document.createElement("div");t.className="gallery";let o=e[0].parentNode,r=e[0];o.insertBefore(t,r);for(let a=0;a<e.length;++a){let y=e[a].querySelector("img").width,u=e[a].querySelector("img").height;e[a].style.flexGrow=`${y*100/u}`,e[a].style.flexBasis=`${y*240/u}px`,t.appendChild(e[a])}}function A(){let e=[P("https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"),P("https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"),T("https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"),T("https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css")];return Promise.all(e)}function k(e){let t=document.querySelector(e).querySelectorAll("figure");if(t.length){let o=[t[0]];for(let r=1;r<t.length;++r)t[r].previousElementSibling===o[o.length-1]?o.push(t[r]):(E(o),o=[t[r]]);o.length>0&&E(o),A().then(()=>{document.querySelector(".pswp").style.removeProperty("display"),I(`${e} .gallery`)})}}var g={};if(localStorage.hasOwnProperty("StackColorsCache"))try{g=JSON.parse(localStorage.getItem("StackColorsCache"))}catch(e){g={}}async function x(e,t,o){if(!e)return await Vibrant.from(o).getPalette();if(!g.hasOwnProperty(e)||g[e].hash!==t){let r=await Vibrant.from(o).getPalette();g[e]={hash:t,Vibrant:{hex:r.Vibrant.hex,rgb:r.Vibrant.rgb,bodyTextColor:r.Vibrant.bodyTextColor},DarkMuted:{hex:r.DarkMuted.hex,rgb:r.DarkMuted.rgb,bodyTextColor:r.DarkMuted.bodyTextColor}},localStorage.setItem("StackColorsCache",JSON.stringify(g))}return g[e]}var M=(e,t=500)=>{e.classList.add("transiting"),e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=e.offsetHeight+"px",e.offsetHeight,e.style.overflow="hidden",e.style.height="0",e.style.paddingTop="0",e.style.paddingBottom="0",e.style.marginTop="0",e.style.marginBottom="0",window.setTimeout(()=>{e.classList.remove("show"),e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("transiting")},t)},q=(e,t=500)=>{e.classList.add("transiting"),e.style.removeProperty("display"),e.classList.add("show");let o=e.offsetHeight;e.style.overflow="hidden",e.style.height="0",e.style.paddingTop="0",e.style.paddingBottom="0",e.style.marginTop="0",e.style.marginBottom="0",e.offsetHeight,e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=o+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout(()=>{e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("transiting")},t)},B=(e,t=500)=>window.getComputedStyle(e).display==="none"?q(e,t):M(e,t);function C(){let e=document.getElementById("toggle-menu");e&&e.addEventListener("click",()=>{document.getElementById("main-menu").classList.contains("transiting")||(document.body.classList.toggle("show-menu"),B(document.getElementById("main-menu"),300),e.classList.toggle("is-active"))})}var L={init:()=>{C(),document.querySelector(".article-content")&&k(".article-content"),document.querySelectorAll(".color-tag").forEach(async t=>{let o=t.getAttribute("data-image"),r=t.getAttribute("data-key"),a=t.getAttribute("data-hash"),y=await x(r,a,o);t.style.color=y.Vibrant.bodyTextColor,t.style.background=y.Vibrant.hex});let e=document.querySelector(".article-list--tile");e&&new IntersectionObserver(async(o,r)=>{o.forEach(a=>{if(!a.isIntersecting)return;r.unobserve(a.target),a.target.querySelectorAll("article.has-image").forEach(async u=>{let f=u.querySelector("img"),b=f.src,v=f.getAttribute("data-key"),n=f.getAttribute("data-hash"),i=u.querySelector(".article-details"),s=await x(v,n,b)})})}).observe(e)}};window.addEventListener("load",()=>{setTimeout(function(){L.init()},0)});window.Stack=L;})();
/*!
*   Hugo Theme Stack
*
*   @author: Jimmy Cai
*   @website: https://jimmycai.com
*   @link: https://github.com/CaiJimmy/hugo-theme-stack
*/
